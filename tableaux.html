<script>
    /* 1.Réalisez un programme permettant de détecter les occurrences d’un élément
        demandé dans un tableau */

    let myArray = [5, 3, 2, 1, 8, 5];
    let userValue = 5;
    let occurence = 0;

    for (let i = 0; i < myArray.length; i++) {
        if (myArray[i] === userValue) {
            occurence++;
        }
    }
    console.log('La valeur', userValue, 'est présente', occurence, 'fois dans le tableau');

    /* 2. Réalisez un programme permettant de détecter l’index d’un élément demandé dans
        un tableau, renvoyez un message à l’utilisateur si l’élément n’est pas présent dans le
        tableau
        Vous ne pouvez utiliser indexOf*/

    let myArray = [5, 3, 8, 2, 5, 8, 9];
    let userValue = 9;
    let index = false;

    for (let i = 0; i < myArray.length; i++) {
        if (myArray[i] == userValue) {
            index = i;
            break;
        }
    }

    if (index !== false) {
        console.log(userValue, "se trouve à l'index", index, "du tableau");
    } else {
        console.log(userValue, "n'est pas présent dans le tableau");
    }

    /* 3. Améliorez votre programme précédent pour détecter toutes les occurrences de
    l’élément demandé et affichez les indexs
    */

    let myArray = [5, 3, 8, 2, 5, 8, 9];
    let userValue = 9;
    let indexes = [];

    for (let i = 0; i < myArray.length; i++) {
        if (myArray[i] == userValue) {
            indexes.push(i);
        }
    }

    if (indexes !== false) {
        console.log(userValue, "se trouve aux index(s)", indexes, "du tableau");
    } else {
        console.log(userValue, "n'est pas présent dans le tableau");
    }

    /* 4. Réalisez un programme capable de fusionner 2 tableaux
    4.1 En ajoutant le contenu du 2ème tableau APRÈS celui du premier
    4.2 En ajoutant le contenu du 2ème tableau AVANT celui du premier
    Vous ne pouvez pas utiliser Array.concat(), uniquement push() et unshift()*/

    // 4.1
    let firstArray = [5, 3, 1];
    let secondArray = [8, 2, 7];

    for (let i = 0; i < secondArray.length; i++) {
        firstArray.push(secondArray[i]);
    }

    console.log('Tableau fusionné (2eme apres)', firstArray);

    // 4.2
    //Methode fénéante, on pousse les éléments après le 2eme tableau
    let thirdArray = [5, 3, 1];
    let fourthArray = [8, 2, 7];

    for (let i = 0; i < thirdArray.length; i++) {
        fourthArray.push(thirdArray[i]);
    }

    console.log('Tableau fusionné (2eme avant)', fourthArray);

    //Méthode alternative pour le 4.2, on unshift le tableau 1
    let fifthArray = [5, 3, 1];
    let sixthArray = [8, 2, 7];

    for (let i = sixthArray.length - 1; i >= 0; i--) {
        fifthArray.unshift(sixthArray[i]);
    }

    console.log('Tableau fusionné (2eme avant) avec unshift', fifthArray);

    /* 5. Réalisez un programme permettant d’inverser les valeurs du tableau
    Vous ne pouvez pas utiliser Array.reverse()
    */

    let myArray = [1, 2, 3, 4, 5, 6, 7, 8, 9];
    let reversedArray = [];
    console.log('Tableau de départ', myArray);

    //1ere méthode : avec un 2eme tableau
    for (let i = myArray.length - 1; i >= 0; i--) {
        reversedArray.push(myArray[i]);
    }
    console.log('Autre tableau inversé', reversedArray);

    //2eme methode : sans autres tableaux
    console.log('Tableau initial', myArray);
    for (let i = 0; i < myArray.length / 2; i++) {
        let temp = myArray[i];
        myArray[i] = myArray[myArray.length - 1 - i];
        myArray[myArray.length - 1 - i] = temp;
    }
    console.log('Même tableau mais inversé', myArray);

    /* 6. Réalisez un programme qui enlève tous les items présents plus d’une fois et les remplacent par “Modifié”*/

    let myArray = [5, 3, 8, 2, 5, 8, 9];
    let duplicates = [];
    console.log('Technique 1, Array de départ', myArray);
    /*Technique 1 : trouver tout les items présents plus d'une fois, ensuite reparcourir le tableau et les modifier*/
    for (let i = 0; i < myArray.length; i++) {
        for (let j = 0; j < myArray.length; j++) {
            if (i !== j) {
                if (myArray[i] == myArray[j]) {
                    duplicates.push(myArray[j]);
                }
            }
        }
    }

    console.log('Duplicates', duplicates);

    for (let k = 0; k < duplicates.length; k++) {
        for (let l = 0; l < myArray.length; l++) {
            if (myArray[l] == duplicates[k]) {
                myArray[l] = "modifié";
            }
        }
    }

    console.log('Array final', myArray);

    /* Technique 2 : Avec index */
    console.log('\n*************************\n');

    myArray = [5, 3, 8, 2, 5, 8, 9, 5, 5, 1, 8];
    console.log('Technique 2, array de départ', myArray);
    let indexes = [];

    for (let i = 0; i < myArray.length; i++) {
        let hasDuplicates = false;
        for (let j = i + 1; j < myArray.length; j++) {
            if (myArray[i] == myArray[j]) {
                hasDuplicates = true;
                indexes.push(j);
            }
        }
        if (hasDuplicates) {
            indexes.push(i);
        }
    }

    console.log('Indexs ou il y a des doublons', indexes);

    for (let i = 0; i < indexes.length; i++) {
        myArray[indexes[i]] = "modifié";
    }

    console.log('Tableau final', myArray)

    /*7. Écrivez un programme capable de comparer 2 tableaux et de détecter la plus grande chaîne d’éléments similaires dans les 2 tableaux.
    Sans utiliser de filter()
    */

    //nos 2 tableaux de départ
    let arr1 = [1, 3, 5, 'banana', 8, 9, 0, 0, 0, 12, 5, 6];
    let arr2 = [0, 'bonjour', 5, 'banana', 8, 9, 0, 1, 3, 5];

    /* tableau qui reprendra les indexs de la chaine en cours*/
    let newSimilar = [];

    /* variable qui gardera les indexs de la chaine précédente pour pouvoir la comparer avec la newSimilar, je garderai la plus grande des 2 (même principe que PP et PG)*/
    let lastSimilar = false;

    /*on parcourt le premier tableau, pour chaque tour du premier tableau on compare avec le tableau suivant*/
    for (let i = 0; i < arr1.length; i++) {

        //je met l'élément du tableau 1 dans check pour la comparer
        let check = arr1[i];

        //je parcours le 2eme tableau
        for (let j = 0; j < arr2.length; j++) {
            //je vérifie si un élément du 2eme tableau correspond, si oui alors on commence une chaine similaire entre les 2, sinon on continue a parcourir le tableau 2
            if (check == arr2[j]) {
                let indexArr2 = j; //on garde l'index du tableau 2 en mémoire
                newSimilar.push(j); //on ajoute a notre chaine l'élément actuel

                //ici on parcourt les 2 tableaux, index par index en parallele en commencant par l'index sur lequel on était déjà +1
                for (let k = i + 1; k < arr1.length; k++) {
                    indexArr2++;
                    //on évite de regarder au dela de la taille du tableau
                    if (arr2.length > indexArr2) {
                        if (arr1[k] == arr2[indexArr2]) {
                            //la chaine continue
                            newSimilar.push(indexArr2);
                        } else {
                            // la chaine est finie
                            break;
                        }
                    } else {
                        //on a parcouru le tableau 2
                        break;
                    }
                }

                //on compare notre nouvelle chaine avec notre précédente (si on en avait une précédente)
                if (!lastSimilar || newSimilar.length > lastSimilar.length) {
                    //si la nouvelle chaine est plus grande alors on l'attribue
                    lastSimilar = newSimilar;
                }
                //on reset notre nouvelle chaine
                newSimilar = [];
            }
        }
    }

    //si on a une chaine alors on la montre
    if (lastSimilar) {
        console.log('Check terminé, la plus grande chaine commune est de', lastSimilar.length, 'commence par ', arr2[lastSimilar[0]], '(index tableau 2 : ', lastSimilar[0], '), et fini par', arr2[lastSimilar[lastSimilar.length - 1]], '(index tableau 2 : ', lastSimilar[lastSimilar.length - 1], ')');
    } else {
        console.log('Aucune similarité');
    }

</script>